<plex-layout main={{main}}>
    <plex-layout-main>
        <plex-title main [titulo]="title"> </plex-title>
        <form #formulario="ngForm">
            <div *ngIf="listaFiltro">
                <plex-select required [(ngModel)]="selectConsulta" name="select" [data]="listaFiltro"
                             labelField="nombre" label="Seleccione consulta" (change)="elegirConsulta()" idField="_id">
                </plex-select>
            </div>
            <plex-box>
                <ng-container *ngIf="(listaArgumentos) && (listaArgumentos.length > 0)">
                    <plex-title main titulo=" Ingrese los Argumentos" size="sm"></plex-title>
                    <!-- se genera listaArgumentos de acuerdo a la consulta elegida -->
                    <div class="col-md" *ngFor="let ar of listaArgumentos" required>
                        <app-filtro-query [argumento]='ar'></app-filtro-query>
                        <br>
                    </div>
                </ng-container>
                <div *ngIf="selectConsulta">
                    <br>
                    <plex-button label="Descargar" type="success" [validateForm]="formulario" (click)=" descargarCSV()"
                                 size="block">
                    </plex-button>
                </div>
            </plex-box>
        </form>
    </plex-layout-main>
    <footer></footer>
</plex-layout>
