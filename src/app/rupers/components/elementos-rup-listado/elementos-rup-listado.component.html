<plex-layout [main]="elementoSeleccionado ? 8 : 12">
    <plex-layout-main>
        <header>
            <div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-bottom: 10px;">
                <plex-title titulo="Elementos RUP">
                    <plex-button type="danger" size="sm">VOLVER</plex-button>
                    <plex-dropdown size="sm" type="info" [right]="true" [items]="items" label="NUEVO">
                    </plex-dropdown>
                </plex-title>
            </div>
            <rup-filtros-elementos-rup></rup-filtros-elementos-rup>
        </header>

        <plex-title titulo="Listado de elementos RUP">
            <button class="btn btn-outline-info" disabled>
                CANTIDAD DE ELEMENTOS: {{ cantidadElementos }}
            </button>
        </plex-title>


        <plex-table [columns]="columns">
            <plex-table-columns>
            </plex-table-columns>


            <tr *ngFor="let elemento of (elementosRup$ | async)" [height]="600"
                [class.selected]=" elemento===elementoSeleccionado" (click)="seleccionar(elemento)"
                [class.selectable]="true">
                <td *plTableCol="'col-1'">{{ elemento.nombre ? elemento.nombre : 'S/N' }}</td>
                <td *plTableCol="'col-2'">{{ elemento.conceptos[0]?.term }}</td>
                <td *plTableCol="'col-3'">{{ elemento.componente }}</td>
                <td *plTableCol="'col-4'">{{ elemento.tipo }}</td>
                <td *plTableCol="'col-5'">{{ elemento.requeridos?.length || 0 }}</td>

            </tr>
        </plex-table>

    </plex-layout-main>

    <!-- Sidebar lateral -->
    <plex-layout-sidebar type="invert" *ngIf="elementoSeleccionado" class="sidebar-fijo">
        <plex-title justify titulo="DETALLE DEL ELEMENTO " size="md">
            <plex-button type="danger" size="sm" icon="close" ariaLabel="cerrar panel lateral"
                (click)="elementoSeleccionado = null">
            </plex-button>
        </plex-title>

        <plex-detail size="md">
            <plex-icon type="info" name="information-variant"></plex-icon>
            <div title> Registrar los signos vitales del paciente </div>
            <plex-label titulo="Fecha creación" subtitulo="09/03/1990"></plex-label>
            <plex-label titulo="Usuario/a que creó" subtitulo="Hospital Provincial Neuquén Dr. Eduardo Castro Rendón">
            </plex-label>
            <plex-label titulo="Ultima edición"
                [subtitulo]="elementoSeleccionado.updatedBy?.nombre || '-'"></plex-label>
            <plex-label titulo="Componente" [subtitulo]="elementoSeleccionado.componente"></plex-label>
            <plex-label titulo="Tipo" [subtitulo]="elementoSeleccionado.tipo"></plex-label>
        </plex-detail>

        <plex-title justify titulo="CONCEPTOS APLICADOS " size="md"></plex-title>
        <plex-accordion [multiple]="false" activeLast="true">


            <plex-panel>
                <div plex-accordion-title justify>
                    <div class="text-center" style="font-style: italic; font-size: 1rem;">
                        {{ elementoSeleccionado.conceptos?.length || 0 }} conceptos aplicados
                    </div>
                </div>
                <div class="p-3">
                    <plex-card *ngFor="let concepto of elementoSeleccionado.conceptos" class="sm">
                        <plex-card-header>
                            <plex-label size="sm" [titulo]="concepto.term || '-'"></plex-label>
                        </plex-card-header>
                    </plex-card>
                </div>

            </plex-panel>
        </plex-accordion>

        <plex-title justify titulo="ÁTOMOS Y MOLÉCULAS VINCULADOS " size="md"></plex-title>

        <plex-accordion [multiple]="false" activeLast="true">
            <plex-panel>
                <div plex-accordion-title justify>
                    <div class="text-center" style="font-style: italic; font-size: 1rem;">
                        {{ elementoSeleccionado.requeridos?.length || 0 }} átomos aplicados
                    </div>
                </div>
                <div class="p-3">
                    <plex-card *ngFor="let requerido of elementoSeleccionado.requeridos" class="sm">
                        <plex-card-header>
                            <plex-label size="sm" [titulo]="requerido.concepto?.term || '-'"></plex-label>
                        </plex-card-header>
                    </plex-card>
                </div>
            </plex-panel>
        </plex-accordion>
    </plex-layout-sidebar>
</plex-layout>